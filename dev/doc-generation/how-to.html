<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Generate rs-server technical documentation</title>
<style>
/*! Copyright (C) 2019, TomTom (http://tomtom.com).
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* Extension of the AsciiDoctor CSS for AsciiDoxy.
 * Adding:
 * - Floating multipage navigation.
 */
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

/* Multipage navigation */
div#navigation {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}
div#navigation table {
    margin-bottom: 0;
}
@media screen and (min-width: 768px) {
    body.toc2 div#navigation {
        left: 15em;
    }
    body.toc2.toc-right div#navigation {
        right: 15em;
    }
}
@media screen and (min-width: 1280px) {
    body.toc2 div#navigation {
        left: 20em;
    }
    body.toc2.toc-right div#navigation {
        right: 20em;
    }
}

</style>
</head>
<body class="article">
<div id="header">
<h1>Generate rs-server technical documentation</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This procedure is run automatically in the CI by the 'generate documentation' workflow.
It can be executed locally to verify the generated documentation (before publishing it for example).</p>
</div>
<div class="paragraph">
<p>See <a href="description.html">Documentation generation process</a> for more details on the process and technical stuff.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">1. Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The local developer environment has been setup.
The global python project is setup.
The python sub-project for doc generation is also setup.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generate_the_technical_documentation">2. Generate the technical documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the rs-server/docs folder, execute the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">poetry run asciidoxy --warnings-are-errors --base-dir doc --image-dir images --build-dir ../dist/doc/ --multipage doc/index.adoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command generates the html pages of all the technical documentation
and write them in the rs-server/dist/doc folder.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generate_the_python_api_documentation">3. Generate the python api documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the root folder, run the following command :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">rm -rf docs/doc/api/python/generated/
poetry run sphinx-apidoc -o docs/doc/api/python/generated/common services/common/rs_server_common/
poetry run sphinx-apidoc -o docs/doc/api/python/generated/cadip services/cadip/rs_server_cadip/
poetry run sphinx-apidoc -o docs/doc/api/python/generated/adgs services/adgs/rs_server_adgs/</code></pre>
</div>
</div>
<div class="paragraph">
<p>It generates rst files from the python doc-strings
and write them in a generated folder (excluded of git conf).</p>
</div>
<div class="paragraph">
<p>Then, execute the following command :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">poetry run sphinx-build -M html docs/doc/api/python/ dist/doc/output/api/python/</code></pre>
</div>
</div>
<div class="paragraph">
<p>It generates the html pages for the python api of the rs-server.
The generated api is accessible locally at 'dist/doc/api/html/index.html'.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generate_the_rest_api_documentation">4. Generate the REST API documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the root folder, run the following command :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mkdir -p dist/doc/output/api/rest/
cp docs/doc/api/rest/index.html dist/doc/output/api/rest/</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous command copies the entry document of the REST API
to the folder in which the documentation is generated.
It&#8217;s important to keep it like that for integration with the technical documentation.</p>
</div>
<div class="paragraph">
<p>From the root folder, run the following command :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">poetry run python -m tests.openapi dist/doc/output/api/rest/</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous command uses FastAPI to extract the openapi specification of the rs-server CADIP service and write it on the expected folder.
The output folder is the one expected for integration with the main document of the rest api previously copied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is a POC waiting for the frontend to be implemented.
The documented REST API will be the one of the frontend at the end.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify_the_generated_documentation">5. Verify the generated documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The technical documentation is generated in the folder "dist/doc/output/".
The main page is the file "index.html" is this folder.
It can be open in a web browser for example.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The REST API can&#8217;t be opened like that since it needs to be served.
You can open the REST API locally starting the rs-server and connecting to the /docs endpoint.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can verify the generated documentation before publishing it.</p>
</div>
<div class="paragraph">
<p>Important elements to check :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the python api is accessible in the technical documentation</p>
</li>
<li>
<p>the python api is well formatted</p>
</li>
<li>
<p>the rest api is accessible in the technical documentation</p>
</li>
<li>
<p>the rest api is well formatted</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div id="navigation">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle"><a href="../environment/installation.html">Prev</a></th>
<th class="tableblock halign-center valign-middle"><a href="../../index.html">Up</a><br>
<a href="../../index.html">Home</a></th>
<th class="tableblock halign-right valign-middle"><a href="../code-style.html">Next</a></th>
</tr>
</thead>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-03-18 10:42:59 UTC
</div>
</div>
</body>
</html>