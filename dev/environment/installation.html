<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Install your environment</title>
<style>
/*! Copyright (C) 2019, TomTom (http://tomtom.com).
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* Extension of the AsciiDoctor CSS for AsciiDoxy.
 * Adding:
 * - Floating multipage navigation.
 */
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

/* Multipage navigation */
div#navigation {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}
div#navigation table {
    margin-bottom: 0;
}
@media screen and (min-width: 768px) {
    body.toc2 div#navigation {
        left: 15em;
    }
    body.toc2.toc-right div#navigation {
        right: 15em;
    }
}
@media screen and (min-width: 1280px) {
    body.toc2 div#navigation {
        left: 20em;
    }
    body.toc2.toc-right div#navigation {
        right: 20em;
    }
}

</style>
</head>
<body class="article">
<div id="header">
<h1>Install your environment</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_pre_requises">Pre requises</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial assumes the developer has already basic knowledge
and is using a ubuntu working station.
This tutorial lets the user uses its preferred IDE.
You could extend your environment with specific IDE integration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_checkout_the_project">Checkout the project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The source code is hosted on github.
You should configure your github token access before.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a project folder that will contain all useful files</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">RSPY_ROOT=~/projects/rspy
mkidr -P $RSPY_ROOT
mkdir $RSPY_ROOT/src/
cd $RSPY_ROOT</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Checkout the project</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd $RSPY_ROOT/src
git clone --branch develop git@github.com:RS-PYTHON/rs-server.git</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_python">Install Python</h2>
<div class="sectionbody">
<div class="paragraph">
<p>rs-server is using python 3.11.
You should install a compatible python version on your working station.</p>
</div>
<div class="paragraph">
<p>It is recommended to use <a href="https://github.com/pyenv/pyenv">pyenv</a> to handle your python versions.
Pyenv provides you an easy way to switch between different python versions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd $RSPY_ROOT/src
pyenv install 3.11.3
pyenv local 3.11.3</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The python version is an example. You could use more recent versions.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These commands install python 3.11 on your workstation and enforces this version for rs-server only.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_poetry">Install Poetry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The dependency management on rs-server is done with <a href="https://python-poetry.org/">Poetry</a>.</p>
</div>
<div class="paragraph">
<p>Is it recommended to use <a href="https://github.com/pypa/pipx">pipx</a> to install your python tools.
Pipx provides you with isolated environment for your python tools.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd $RSPY_ROOT/src
pipx install poetry</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup_the_project">Setup the project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The project is managed by poetry.</p>
</div>
<div class="paragraph">
<p>You should first initialize the project locally</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd $RSPY_ROOT/src/rs-server
poetry install --with dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command initialize and activate a virtual environment for your project.
It installs in this environment the project dependencies
and the develop dependencies (--with dev).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Your IDE can provide poetry integration.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify_your_local_environment">Verify your local environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To verify your environment is correctly installed,
you can run the unittests and verify that they run nominally</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd $RSPY_ROOT/src/rs-server
pytest tests -m "unit"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Your IDE can provide integration to run your unittests.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_trivi">Install trivi</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://aquasecurity.github.io/trivy/v0.47/">trivy</a> is used to do some security and license checks on the repository, the generated wheel packages and the docker images.</p>
</div>
<div class="paragraph">
<p>trivi is run on the pre-commit and the CI
to verify the repository compliance with common vulnerabilities, secrets and licenses.</p>
</div>
<div class="paragraph">
<p>To install trivy on your local environment,
follow <a href="https://aquasecurity.github.io/trivy/v0.47/getting-started/installation/">the official procedure</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_pre_commit_hooks">Install pre-commit hooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>pre-commit is used to check basic rules before each commit.
You should activate them :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd $RSPY_ROOT/src/rs-server
poetry run pre-commit install</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once installed, checks will be performed before each commit
to ensure your code is compliant with project best practice :
* assert no unresolved merge conflicts
* fix end of file
* fix trailing whitespace
* check toml
* run black formatter
* run linters
* run trivy repo checks</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It is useful to configure your IDE to run black at each file saving
so that you keep your code compliant with the project coding style.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_ide_configuration">Additional IDE configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will not give specific IDE configurations.
Nevertheless, it is relevant to configure your IDE
to run format and lint after each save
to keep your code compliant with the coding style at any moment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_next_steps">The next steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="description.html">Development environment description</a> can provide you with more details about the environment.
The <a href="../background/workflow.html">Team workflow</a> describes the workflow followed by developers to implement stories.
You may also want to read the <a href="../code-style.html">Coding style</a>.</p>
</div>
<div id="navigation">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle"><a href="../../index.html">Prev</a></th>
<th class="tableblock halign-center valign-middle"><a href="../../index.html">Up</a><br>
<a href="../../index.html">Home</a></th>
<th class="tableblock halign-right valign-middle"><a href="../doc-generation/how-to.html">Next</a></th>
</tr>
</thead>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-01-16 10:05:34 UTC
</div>
</div>
</body>
</html>